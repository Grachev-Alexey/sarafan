{% extends 'partner/base.html' %}

{% block title %}Регистрация партнера{% endblock %}

{% block page_title %}Регистрация партнера{% endblock %}

{% block content %}
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-6">
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Регистрация партнера</h3>
          </div>
          <div class="card-body">
            <form method="POST" action="">
              {{ form.hidden_tag() }}

              <div class="form-group">
                {{ form.salon_name.label(class="form-label") }}
                {{ form.salon_name(class="form-control") }}
              </div>

              <div class="form-group">
                {{ form.partner_type.label(class="form-label") }}
                {% for subfield in form.partner_type %}
                  <div class="form-check">
                    {{ subfield(class="form-check-input") }}
                    {{ subfield.label(class="form-check-label") }}
                  </div>
                {% endfor %}
              </div>

<div class="form-group" id="owner-field"> 
    {{ form.owner.label(class="form-label") }}
    {{ form.owner(class="form-control") }}
</div>

<div class="form-group">
    {{ form.categories.label(class="form-label") }}
    {{ form.categories(class="form-control selectpicker", multiple=True, data_live_search="true", data_size="10", title="Выберите категории") }}
</div>

              <div class="form-group">
                {{ form.city.label(class="form-label") }}
                {{ form.city(class="form-control selectpicker", data_live_search="true", title="Выберите город") }}
              </div>

              <div class="form-group">
                {{ form.discount_text.label(class="form-label") }}
                {{ form.discount_text(class="form-control") }}
              </div>

              <div class="form-group">
                {{ form.contacts.label(class="form-label") }}
                {{ form.contacts(class="form-control") }}
              </div>

              <div class="form-group">
                {{ form.message_salon_name.label(class="form-label") }}
                {{ form.message_salon_name(class="form-control") }}
              </div>

              <div class="form-group">
                {{ form.login.label(class="form-label") }}
                {{ form.login(class="form-control") }}
              </div>

              <div class="form-group">
                {{ form.password.label(class="form-label") }}
                {{ form.password(class="form-control") }}
              </div>

              <div class="form-group">
                {{ form.confirm_password.label(class="form-label") }}
                {{ form.confirm_password(class="form-control") }}
              </div>
              <div class="form-group">
                {{ form.submit(class="btn btn-primary") }}
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
<script>
    $(document).ready(function() {
        $('.selectpicker').selectpicker({
            liveSearch: true,
            size: 10
        });

        // Проверяем тип партнера при загрузке страницы
        if ($('input[name="partner_type"]:checked').val() === 'individual') {
            $('#owner-field').show();
        } else {
            $('#owner-field').hide();
        }

        $('input[name="partner_type"]').change(function() {
            if ($(this).val() === 'individual') {
                $('#owner-field').show();
            } else {
                $('#owner-field').hide();
            }
        });
    });
</script>
{% endblock %}